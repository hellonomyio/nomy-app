<!doctype html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}NOMY{% endblock %}</title>

  <!-- DM Sans -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/nomy_favicon_32x32.png' %}">
  <link rel="icon" type="image/png" sizes="64x64" href="{% static 'images/nomy_favicon_64x64.png' %}">

  <style>
  :root{
    --bg:#ffffff;
    --text:#22163c;
    --muted:#5e4f79;
    --divider:#ece8f7;
    --shadow:0 8px 30px rgba(17,12,40,.10);
    --radius:20px;
  }

  html, body { height: 100% }
  body{
    margin:0;
    font-family:'DM Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--text);
    background:var(--bg);
  }

  /* ============== NAVBAR ============== */
  .site-navbar{
    position: fixed;
    top: 0; left: 0; width: 100%;
    background: rgba(255,255,255,.95);
    box-shadow: var(--shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 40px;
    z-index: 2000;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: padding .3s ease;
  }

  .site-navbar .logo{
    font-weight:700;
    font-size:20px;
    color:var(--text);
    text-decoration:none;
  }

  .site-navbar .links a{
    margin-left:28px;
    text-decoration:none;
    color:var(--muted);
    font-weight:500;
    transition: color .2s ease;
  }
  .site-navbar .links a:hover{ color:var(--text); }

  /* Hamburger */
  .site-navbar .hamburger{
    display:none;
    flex-direction:column;
    justify-content:center;
    gap:5px;
    width:26px;
    height:24px;
    cursor:pointer;
    background:none;
    border:none;
    padding:0;
    position:relative;
    z-index:2001; /* ensures visible above blur */
  }
  .site-navbar .hamburger span{
    height:3px;
    background:var(--text);
    border-radius:2px;
    transition: all .3s ease;
  }
  .site-navbar .hamburger.active span:nth-child(1){ transform: translateY(8px) rotate(45deg); }
  .site-navbar .hamburger.active span:nth-child(2){ opacity:0; }
  .site-navbar .hamburger.active span:nth-child(3){ transform: translateY(-8px) rotate(-45deg); }

  /* ============== SIDEBAR ============== */
  .site-sidebar{
    position: fixed;
    top: 0; left: -260px;
    width: 240px; height: 100%;
    background: #fff;
    box-shadow: 4px 0 30px rgba(0,0,0,.08);
    padding: 80px 20px 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: left .3s ease;
    z-index: 1999;
  }
  .site-sidebar.open{ left: 0; }

  .site-sidebar .top-links,
  .site-sidebar .bottom-links {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .site-sidebar a{
    text-decoration: none;
    color: var(--text);
    font-weight: 500;
    font-size: 18px;
    transition: color .2s ease;
  }
  .site-sidebar a:hover{ color: var(--muted); }

  .divider{
    height:1px;
    background:var(--divider);
    margin:24px 0;
  }

  /* ============== RESPONSIVE ============== */
  @media (max-width:720px){
    .site-navbar .links{ display:none; }
    .site-navbar .hamburger{
      display:flex;
      position:relative;
      z-index:2001;
    }
    .site-navbar .hamburger span{ background:#1b1230; }
    .site-navbar .logo{ display:none; }
    .site-navbar{
      justify-content:flex-start;
      gap:20px;
      padding:12px 20px;
      padding-left:16px;
    }
  }

  main{ padding-top: 80px; }

  .container{
    max-width: 1000px; margin: 0 auto; padding: 0 20px;
  }

  /* Optional smooth fade-in for mobile nav */
  @media (prefers-reduced-motion: no-preference){
    .site-sidebar{ transition:left .25s ease; }
  }
  </style>
</head>

<body>
  <!-- NAVBAR -->
  <nav class="site-navbar" role="navigation" aria-label="Primary">
    <button class="hamburger" id="hamburger" aria-label="Open menu" aria-controls="sidebar" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <a href="{% url 'nomy-options' %}" class="logo">NOMY</a>

    <div class="links" aria-label="Primary links">
      <a href="{% url 'emotionfy:emotionize-home' %}">Emotionize</a>
      <a href="{% url 'dailies:dailies-home' %}">Dailies</a>
      <a href="{% url 'express:express-home' %}">Express</a>
      <a href="{% url 'toolkit:toolkit-home' %}">Toolkit</a>
    </div>
  </nav>

  <!-- SIDEBAR -->
  <aside class="site-sidebar" id="sidebar" aria-label="Mobile menu">
    <div class="top-links">
      <a href="{% url 'emotionfy:emotionize-home' %}">Emotionize</a>
      <a href="{% url 'dailies:dailies-home' %}">Dailies</a>
      <a href="{% url 'express:express-home' %}">Express</a>
      <a href="{% url 'toolkit:toolkit-home' %}">Toolkit</a>
    </div>

    <div>
      <div class="divider"></div>
      <div class="bottom-links">
        <a href="{% url 'nomy-about' %}">About this app</a>
        <a href="{% url 'nomy-settings' %}">Settings</a>
        <a href="{% url 'nomy-help' %}">Help</a>
        <!-- <a href="{% url 'logout' %}">Logout</a> -->
      </div>
    </div>
  </aside>

  <main>
    {% block content %}{% endblock %}
  </main>

  <script>
  const burger  = document.getElementById('hamburger');
  const sidebar = document.getElementById('sidebar');

  burger.addEventListener('click', () => {
    const open = sidebar.classList.toggle('open');
    burger.classList.toggle('active', open);
    burger.setAttribute('aria-expanded', open ? 'true' : 'false');
  });

  document.querySelectorAll('.site-sidebar a').forEach(link => {
    link.addEventListener('click', () => {
      sidebar.classList.remove('open');
      burger.classList.remove('active');
      burger.setAttribute('aria-expanded', 'false');
    });
  });
  </script>
</body>
</html>
