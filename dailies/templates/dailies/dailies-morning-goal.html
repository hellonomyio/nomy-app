<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NOMY ‚Ä¢ Morning Goal</title>

  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --ink:#2e2840;
      --muted:#6b647d;
      --panel:#eaeaf5;
      --shadow:0 24px 60px rgba(0,0,0,.10);
      --radius:26px;
      --lavender:#f4f1ff;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:"DM Sans",system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      display:flex; justify-content:center; align-items:flex-start;
    }

    main{width:min(760px,92vw);padding:80px 20px;text-align:center}

    h1{margin:0 0 12px;font-weight:600;font-size:clamp(26px,3.5vw,38px)}
    p.sub{margin:0 0 32px;color:var(--muted);font-size:clamp(15px,1.6vw,18px)}

    .affirmation-summary{
      background:#faf7ff;
      border-radius:20px;
      padding:16px 20px;
      box-shadow:0 8px 24px rgba(0,0,0,.05);
      margin:0 auto 36px;
      max-width:520px;
      font-size:clamp(15px,1.4vw,18px);
      color:var(--ink);
    }

    textarea{
      width:100%;
      height:clamp(220px,36vh,320px);
      padding:24px 20px;
      border:none;
      background:var(--panel);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      color:var(--ink);
      font:500 16px/1.5 "DM Sans",sans-serif;
      resize:vertical;
      outline:none;
    }

    .hint{margin-top:12px;color:var(--muted);font-size:clamp(13px,1.4vw,16px)}
    .actions{margin-top:48px}

    button{
      appearance:none;border:0;cursor:pointer;
      padding:14px 28px;
      border-radius:999px;
      background:var(--lavender);
      color:var(--ink);
      font:700 16px "DM Sans",sans-serif;
      box-shadow:0 10px 24px rgba(0,0,0,.08);
      transition:transform .12s ease,box-shadow .25s ease,background .25s ease;
    }
    button:hover{
      transform:translateY(-2px);
      box-shadow:0 18px 40px rgba(0,0,0,.14);
      background:#efe9ff;
    }
  </style>
</head>

<body>
  <main id="page">
    <h1>Let‚Äôs set your focus</h1>
    <p class="sub">What‚Äôs one gentle thing you‚Äôd like to achieve today?</p>

    <div id="affirmationSummary" class="affirmation-summary"></div>

    <form id="goalForm">
      <textarea id="goal" placeholder="Write your goal for today‚Ä¶"></textarea>
      <p class="hint">Remember, no goal is too big or too small.</p>
      <div class="actions"><button type="submit">Save üåø</button></div>
    </form>
  </main>

  <script>
    const summaryBox = document.getElementById("affirmationSummary");
    const affirmation = localStorage.getItem("nomy_affirmation");

    if(affirmation){
      summaryBox.innerHTML = `You said earlier: <em>‚Äú${affirmation}‚Äù</em>`;
    } else {
      summaryBox.innerHTML = `<em>No affirmation found</em>`;
    }

    document.getElementById('goalForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const goal = document.getElementById('goal').value.trim();
      if(!goal) return alert("Please write your goal üå±");

      const entry = {
        date: new Date().toLocaleDateString(),
        affirmation: affirmation || "",
        goal: goal
      };

      const all = JSON.parse(localStorage.getItem('nomy_dailies') || "[]");
      all.push(entry);
      localStorage.setItem('nomy_dailies', JSON.stringify(all));

      localStorage.removeItem('nomy_affirmation');

      document.getElementById('page').innerHTML = `
        <h1>Saved üå§</h1>
        <p style="opacity:.8;">Your reflection has been added to your Dailies.<br>You can view it anytime from the menu.</p>
        <div class="actions">
          <button onclick="window.location.href='{% url 'dailies:morningAffirmation' %}'">Start again</button>
        </div>
      `;
    });
  </script>
</body>
</html>
