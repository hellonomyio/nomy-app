<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NOMY â€“ Morning</title>

  <!-- DM Sans -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --ink:#2e2840;
      --muted:#6b647d;
      --panel:#eaeaf5;
      --shadow:0 24px 60px rgba(0,0,0,.10);
      --radius:26px;
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:"DM Sans",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      display:flex; justify-content:center;
    }

    main{ width:min(980px,92vw); padding:56px 16px 80px; text-align:center; }

    h1{
      margin:0 0 40px;
      font-weight:500;
      letter-spacing:.2px;
      font-size:clamp(24px,3.2vw,40px);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: clamp(20px, 3vw, 40px);
      align-items:start;
      margin-top:24px;
    }

    .block label{
      display:block;
      text-align:left;
      font-weight:500;
      margin:0 0 14px 8px;
      font-size:clamp(16px,1.6vw,22px);
    }

    textarea{
      width:100%;
      height: clamp(220px, 32vh, 300px);
      padding:22px 20px;
      border:none;
      background:var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      color:var(--ink);
      font:500 16px/1.5 "DM Sans",sans-serif;
      resize: vertical;
      outline:none;
    }

    .hint{
      margin:8px 8px 0;
      text-align:left;
      color:var(--ink);
      opacity:.75;
      font-size:clamp(13px,1.3vw,16px);
    }

    .actions{ margin:48px 0 0; }
    button{
      appearance:none; border:0; cursor:pointer;
      padding:14px 22px;
      border-radius:999px;
      background:#f4f1ff;
      color:var(--ink);
      font:700 16px "DM Sans",sans-serif;
      box-shadow:0 10px 24px rgba(0,0,0,.08);
      transition:transform .12s ease, box-shadow .25s ease;
    }
    button:hover{ transform:translateY(-2px); box-shadow:0 18px 40px rgba(0,0,0,.14); }

    /* saved reflection */
    .reflection-box{
      background:#f7f6fb;
      padding:28px;
      border-radius:26px;
      box-shadow:0 12px 30px rgba(0,0,0,.08);
      max-width:700px;
      margin:auto;
      text-align:left;
    }
    .reflection-box p{ font-size:18px; line-height:1.5; color:#2e2840; }

    /* gentle reminder */
    #gentle-reminder{
      display:none;
      margin-top:32px;
      padding:22px 20px;
      border-radius:24px;
      background:#faf7ff;
      box-shadow:0 10px 26px rgba(0,0,0,.05);
      color:#2e2840;
      text-align:center;
      font-size:16px;
      line-height:1.5;
      transition:opacity .4s ease;
    }

    @media (max-width:760px){
      .grid{ grid-template-columns:1fr; }
      .hint, .block label{ text-align:center; margin-left:0; }
      .reflection-box{ text-align:center; }
    }
  </style>
</head>
<body>
  <main id="page"></main>

  <script>
    const page = document.getElementById('page');

    function renderForm(entry={}) {
      page.innerHTML = `
        <h1>good morning</h1>
        <form class="grid">
          <div class="block">
            <label for="affirmation">my daily affirmation</label>
            <textarea id="affirmation" placeholder="Type your affirmationâ€¦">${entry.affirmation||''}</textarea>
            <p class="hint">examples: I can move at my own pace, I am enough</p>
          </div>
          <div class="block">
            <label for="goal">todayâ€™s goal</label>
            <textarea id="goal" placeholder="What one thing will you focus on today?">${entry.goal||''}</textarea>
            <p class="hint">remember, no goal is too big or too small</p>
          </div>
          <div class="actions" style="grid-column:1/-1;">
            <button type="submit">save to my dailies</button>
          </div>
        </form>
        <div id="gentle-reminder">
          <p>Youâ€™ve been doing beautifully reflecting on your days ðŸ’œ  
          Would you like to keep your Dailies safe to come back to later?</p>
          <button id="signup-btn" style="background:#e9c3f1; color:#2e2840; border:0; padding:10px 18px; border-radius:999px; font-weight:600; cursor:pointer;">Save my reflections</button>
          <button id="guest-btn" style="background:none; border:0; color:#6b647d; font-weight:500; margin-left:12px; cursor:pointer;">Not now</button>
        </div>
      `;

      const form = page.querySelector('form');
      form.onsubmit = saveEntry;
    }

    function renderSaved(entry) {
      page.innerHTML = `
        <h1>your reflection for today ðŸŒ¿</h1>
        <div class="reflection-box">
          <p><strong>Affirmation:</strong><br>${entry.affirmation}</p>
          <p><strong>Goal:</strong><br>${entry.goal}</p>
          <div style="margin-top:30px; text-align:center;">
            <button id="editBtn">Edit</button>
            <button id="newBtn" style="background:none; border:0; color:#6b647d; font-weight:500; margin-left:16px; cursor:pointer;">Start new</button>
          </div>
        </div>
      `;
      document.getElementById('editBtn').onclick = () => renderForm(entry);
      document.getElementById('newBtn').onclick = () => renderForm();
    }

    function saveEntry(e){
      e.preventDefault();
      const entry = {
        affirmation: document.getElementById('affirmation').value.trim(),
        goal: document.getElementById('goal').value.trim(),
        date: new Date().toLocaleDateString()
      };
      if(!entry.affirmation && !entry.goal) return;

      // save in localStorage
      localStorage.setItem('nomy_dailies_last', JSON.stringify(entry));

      // keep list of all entries
      const all = JSON.parse(localStorage.getItem('nomy_dailies') || '[]');
      all.push(entry);
      localStorage.setItem('nomy_dailies', JSON.stringify(all));

      // show saved view
      renderSaved(entry);

      // gentle reminder after 2 entries
      if(all.length === 2){
        setTimeout(()=>{
          const reminder = document.createElement('div');
          reminder.id = "gentle-reminder";
          reminder.style = "margin-top:32px;padding:22px 20px;border-radius:24px;background:#faf7ff;box-shadow:0 10px 26px rgba(0,0,0,.05);color:#2e2840;text-align:center;font-size:16px;line-height:1.5;";
          reminder.innerHTML = `
            <p>Youâ€™ve been doing beautifully reflecting on your days ðŸ’œ<br>
            Would you like to keep your Dailies safe to come back to later?</p>
            <button id="signup-btn" style="background:#e9c3f1; color:#2e2840; border:0; padding:10px 18px; border-radius:999px; font-weight:600; cursor:pointer;">Save my reflections</button>
            <button id="guest-btn" style="background:none; border:0; color:#6b647d; font-weight:500; margin-left:12px; cursor:pointer;">Not now</button>
          `;
          page.appendChild(reminder);
          document.getElementById('signup-btn').onclick = () => window.location.href = '/signup/';
          document.getElementById('guest-btn').onclick = () => reminder.remove();
        }, 300);
      }
    }

    function loadSaved(){
      const saved = JSON.parse(localStorage.getItem('nomy_dailies_last'));
      if(saved) renderSaved(saved);
      else renderForm();
    }

    loadSaved();
  </script>
</body>
</html>
